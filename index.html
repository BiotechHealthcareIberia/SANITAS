<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <!-- Título de la pestaña -->
    <title>Tarifa Sanitas 2026</title>
    
    <!-- Metadatos para compartir el enlace -->
    <meta property="og:title" content="Tarifa Sanitas 2026">
    <meta property="og:description" content="Portal de Tarifas y Gestión Comercial Biotech Healthcare para Sanitas 2026.">
    <meta name="description" content="Tarifa Preferente Sanitas 2026 - Biotech Healthcare">

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap');
        
        body { 
            font-family: 'Plus Jakarta Sans', sans-serif; 
            background-color: #f8fafc; 
            margin: 0; 
            -webkit-font-smoothing: antialiased;
        }
        
        h1, h2, h3, h4, h5 {
            word-spacing: 0.02em;
            letter-spacing: -0.02em;
        }

        .tab-content { display: none; }
        .tab-content.active { display: block; }
        
        .nav-btn {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .nav-btn.active { 
            background-color: #2563eb; 
            color: white; 
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.25); 
        }

        .animate-in { animation: fadeIn 0.3s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
        
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* Estilos personalizados para sliders */
        input[type=range] { -webkit-appearance: none; width: 100%; background: transparent; }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none; height: 20px; width: 20px; border-radius: 50%;
            background: #2563eb; cursor: pointer; border: 3px solid white;
            box-shadow: 0 4px 8px rgba(0,0,0,0.15); margin-top: -8px;
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%; height: 6px; background: rgba(37, 99, 235, 0.15); border-radius: 3px;
        }

        /* Inputs premium */
        select, input, textarea {
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            padding: 12px 16px;
            font-size: 16px; /* Evita zoom automático en iOS */
            outline: none;
            transition: all 0.2s;
            width: 100%;
            background-color: white;
        }
        @media (min-width: 768px) {
            select, input, textarea { font-size: 14px; }
        }
        select:focus, input:focus, textarea:focus { border-color: #2563eb; box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.08); }
        
        .form-label { 
            font-size: 9px; 
            font-weight: 800; 
            text-transform: uppercase; 
            color: #64748b; 
            letter-spacing: 0.05em; 
            margin-bottom: 6px; 
            display: block;
        }

        /* Badges con degradado sutil */
        .badge-new {
            background: linear-gradient(135deg, #fbbf24, #f59e0b); 
            color: #451a03;
            padding: 2px 8px;
            border-radius: 6px;
            font-size: 8.5px;
            font-weight: 900;
            text-transform: uppercase;
        }

        .badge-upgrade {
            background: linear-gradient(135deg, #a855f7, #7e22ce); 
            color: white;
            padding: 2px 8px;
            border-radius: 6px;
            font-size: 8.5px;
            font-weight: 900;
            text-transform: uppercase;
        }

        .badge-special {
            background: linear-gradient(135deg, #0ea5e9, #0369a1); 
            color: white;
            padding: 2px 8px;
            border-radius: 6px;
            font-size: 8.5px;
            font-weight: 900;
            text-transform: uppercase;
        }

        .confidential-card {
            background: #ffffff;
            border: 1px solid #e2e8f0;
            padding: 1.5rem;
            margin-top: 2rem;
            border-radius: 24px;
        }

        .contact-card {
            background: #f8fafc;
            border: 1px solid #f1f5f9;
            transition: all 0.2s ease;
        }
        .contact-card:hover { border-color: #2563eb; transform: translateY(-2px); }

        /* Optimización de tablas en móvil */
        .table-scroll {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }
    </style>
</head>
<body class="text-slate-900 bg-slate-50 min-h-screen font-medium">

    <div class="max-w-6xl mx-auto p-4 md:p-8 lg:p-10 pb-24">
        <!-- CABECERA -->
        <header class="flex flex-col lg:flex-row justify-between items-start lg:items-center mb-10 gap-6">
            <div class="flex flex-col gap-2">
                <div class="inline-flex items-center gap-2 px-2.5 py-1 bg-blue-600 text-white text-[10px] font-bold uppercase tracking-widest rounded shadow-sm w-fit">
                    <i data-lucide="shield-check" class="w-3.5 h-3.5 text-white"></i> BIOTECH 2026
                </div>
                <h1 class="text-4xl md:text-6xl font-black text-slate-900 tracking-tighter leading-none">Sanitas</h1>
            </div>
            
            <nav class="flex bg-white p-1.5 rounded-2xl shadow-sm border border-slate-200 overflow-x-auto no-scrollbar w-full lg:w-auto sticky top-4 z-40">
                <div class="flex flex-nowrap min-w-max gap-1">
                    <button onclick="showTab('catalog')" id="btn-catalog" class="nav-btn active px-5 py-2.5 rounded-xl text-xs font-bold uppercase whitespace-nowrap">Tarifa 2026</button>
                    <button onclick="showTab('overview')" id="btn-overview" class="nav-btn px-5 py-2.5 rounded-xl text-xs font-bold text-slate-400 hover:bg-slate-50 uppercase whitespace-nowrap">Rappel</button>
                    <button onclick="showTab('onboarding')" id="btn-onboarding" class="nav-btn px-5 py-2.5 rounded-xl text-xs font-bold text-slate-400 hover:bg-slate-50 uppercase whitespace-nowrap">Alta Cliente</button>
                    <button onclick="showTab('logistic')" id="btn-logistic" class="nav-btn px-5 py-2.5 rounded-xl text-xs font-bold text-slate-400 hover:bg-slate-50 uppercase whitespace-nowrap">Logística</button>
                </div>
            </nav>
        </header>

        <!-- PESTAÑA 1: TARIFA -->
        <div id="catalog" class="tab-content active space-y-6 animate-in">
            <!-- Email Pedidos y Acceso Calculador -->
            <div class="bg-blue-600 p-6 md:p-10 rounded-[32px] text-white shadow-xl flex flex-col md:flex-row justify-between items-center gap-8 relative overflow-hidden">
                <div class="absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16"></div>
                <div class="flex items-center gap-5 z-10">
                    <div class="w-14 h-14 bg-white/20 rounded-2xl flex items-center justify-center shrink-0">
                        <i data-lucide="shopping-bag" class="w-7 h-7 text-white"></i>
                    </div>
                    <div>
                        <p class="text-[10px] font-black uppercase opacity-70 tracking-widest mb-1">Pedidos Centralizados</p>
                        <p class="text-sm md:text-xl font-bold break-all">pedidos.iberia@biotechhealthcare.com</p>
                    </div>
                </div>
                <div class="flex z-10 w-full md:w-auto">
                    <a href="https://biotechcalculators.com/" target="_blank" class="w-full md:w-auto bg-white text-blue-600 px-8 py-4 rounded-2xl font-black text-xs uppercase tracking-wider hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 shadow-lg">
                        <i data-lucide="calculator" class="w-5 h-5"></i> Calculador Biotech
                    </a>
                </div>
            </div>

            <div class="bg-white rounded-[40px] border border-slate-100 shadow-xl overflow-hidden">
                <div class="p-6 md:p-8 border-b border-slate-50 bg-slate-50/30 flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
                    <h3 class="font-black text-2xl uppercase tracking-tighter text-slate-800 flex items-center gap-3">
                        <i data-lucide="list-checks" class="text-blue-600"></i> Tarifa Preferente 2026
                    </h3>
                </div>
                <div class="table-scroll">
                    <table class="w-full text-left border-collapse min-w-[750px]">
                        <thead class="bg-slate-50 border-b font-bold text-slate-400 uppercase tracking-widest text-[9px]">
                            <tr>
                                <th class="p-6">Gama / Producto</th>
                                <th class="p-6 text-right">Precio Neto (€)</th>
                                <th class="p-6">Especificación Técnica</th>
                            </tr>
                        </thead>
                        <tbody id="product-list" class="divide-y divide-slate-50"></tbody>
                    </table>
                </div>
                <div class="px-8 py-5 bg-slate-50/50 border-t border-slate-100 flex flex-col md:flex-row justify-between gap-2">
                    <p class="text-[10px] text-slate-400 font-bold uppercase tracking-wide italic">
                        * Todos los precios son revisables anualmente.
                    </p>
                    <p class="text-[10px] text-slate-500 font-black uppercase tracking-wide">
                        IVA NO INCLUIDO
                    </p>
                </div>
            </div>
            <div id="confidential-footer-catalog" class="confidential-card"></div>
        </div>

        <!-- PESTAÑA 2: RAPPEL -->
        <div id="overview" class="tab-content space-y-6 animate-in">
            <div class="flex items-center gap-3 md:gap-4 mb-2">
                <div class="h-6 md:h-8 w-1.5 bg-blue-600 rounded-full"></div>
                <h2 class="text-xl md:text-2xl font-black text-slate-900 uppercase tracking-tight">Acuerdo de Rappel Sanitas</h2>
            </div>

            <div class="bg-slate-900 p-6 md:p-12 rounded-[40px] text-white shadow-2xl relative overflow-hidden" id="internal-simulator">
                <div class="absolute top-0 right-0 w-64 h-64 bg-blue-500/10 rounded-full blur-[100px] -mr-32 -mt-32"></div>
                <div class="relative z-10">
                    <div class="flex justify-between items-start mb-10 border-b border-white/10 pb-5">
                        <h3 class="text-xl font-extrabold uppercase tracking-tight">Simulador Anual</h3>
                        <span class="text-[10px] bg-blue-600 px-3 py-1 rounded-full font-black tracking-widest">2026</span>
                    </div>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-10 items-center">
                        <div class="space-y-6">
                            <p class="text-slate-500 text-[10px] font-bold uppercase tracking-widest">Facturación Estimada</p>
                            <h2 id="group-display" class="text-5xl md:text-7xl font-black tracking-tighter tabular-nums text-white">950.000 €</h2>
                            <div class="pt-4">
                                <input type="range" id="group-slider" min="100000" max="3000000" step="50000" value="950000" oninput="updateGroupSim(this.value)" class="w-full">
                            </div>
                        </div>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                            <div class="p-6 bg-white/5 rounded-3xl border border-white/10 text-center">
                                <p class="text-slate-500 text-[9px] font-bold uppercase mb-2">Abono Neto</p>
                                <p id="group-cash" class="text-2xl md:text-3xl font-black text-emerald-400 tabular-nums">28.500 €</p>
                            </div>
                            <div class="p-6 bg-blue-600/20 rounded-3xl border border-blue-500/30 text-center">
                                <p class="text-blue-300 text-[9px] font-bold uppercase mb-2">Tramo %</p>
                                <p id="group-percent" class="text-2xl md:text-3xl font-black text-blue-400 tabular-nums">3,0%</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- Escala -->
                <div class="lg:col-span-1 bg-white p-6 md:p-8 rounded-[32px] border border-slate-200 shadow-sm">
                    <h3 class="text-[10px] font-black text-slate-400 uppercase tracking-widest mb-6">Escala Vigente</h3>
                    <div class="table-scroll">
                        <table class="w-full text-left">
                            <tbody class="divide-y divide-slate-50" id="rappel-table-body"></tbody>
                        </table>
                    </div>
                </div>
                <!-- Calculadora -->
                <div class="lg:col-span-2 bg-white p-6 md:p-10 rounded-[40px] border border-slate-200 shadow-xl">
                    <h3 class="text-2xl font-black text-slate-900 uppercase mb-8">Calculadora Biotech</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div class="space-y-5">
                            <div><label class="form-label">Pseudofáquicas (Uds)</label><input type="number" id="q-pseudo-qty" value="3800" oninput="updateQProgress()"></div>
                            <div><label class="form-label">Fáquicas (Uds)</label><input type="number" id="q-phakic-qty" value="250" oninput="updateQProgress()"></div>
                            <div><label class="form-label">Viscos (Uds)</label><input type="number" id="q-visco-qty" value="5500" oninput="updateQProgress()"></div>
                        </div>
                        <div class="flex flex-col justify-center gap-4 bg-slate-50 p-6 rounded-3xl">
                            <div><p class="text-[10px] font-black text-blue-600 mb-1 uppercase">Abono Estimado</p><p id="q-rappel-cash" class="text-4xl font-black text-blue-900 tabular-nums">0 €</p></div>
                            <div><p class="text-[10px] font-black text-slate-400 mb-1 uppercase">Total Negocio</p><p id="total-euro-display" class="text-xl font-black text-slate-700 tabular-nums">0 €</p></div>
                            <button onclick="sendQReport()" class="w-full bg-slate-900 text-white font-black py-4 rounded-xl shadow-lg hover:bg-blue-600 transition-all uppercase text-[10px] tracking-widest flex items-center justify-center gap-2 mt-2">
                                <i data-lucide="send" class="w-3.5 h-3.5"></i> Reporte a Gerencia
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="confidential-footer-overview" class="confidential-card"></div>
        </div>

        <!-- PESTAÑA 3: ALTA NUEVO CLIENTE -->
        <div id="onboarding" class="tab-content space-y-8 animate-in">
            <div class="bg-white p-6 md:p-12 rounded-[40px] shadow-2xl border border-slate-100">
                <h4 class="font-black text-2xl md:text-3xl text-slate-900 uppercase mb-10 border-b pb-6">Ficha Maestro de Cliente</h4>
                <form id="client-onboarding-form" onsubmit="event.preventDefault(); submitOnboarding();" class="space-y-12">
                    <div class="space-y-8">
                        <div class="section-header flex items-center gap-3"><i data-lucide="building-2" class="w-5 h-5 text-blue-600"></i><span class="text-xs font-black uppercase tracking-widest text-slate-400">Datos Fiscales Obligatorios</span></div>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div class="md:col-span-2"><label class="form-label">Nombre / Customer Name</label><input type="text" id="bill-name" required placeholder="Nombre completo"></div>
                            <div><label class="form-label">NIF / VAT Number</label><input type="text" id="bill-nif" required placeholder="Código fiscal"></div>
                            <div class="md:col-span-2"><label class="form-label">Dirección / Address</label><input type="text" id="bill-address" required placeholder="Calle, número, CP y Ciudad"></div>
                            <div><label class="form-label">País</label><input type="text" id="bill-country" value="España" required></div>
                            <div><label class="form-label">Teléfono</label><input type="tel" id="bill-phone" required placeholder="Contacto directo"></div>
                            <div><label class="form-label">Email Facturación</label><input type="email" id="bill-email" required placeholder="facturas@dominio.com"></div>
                            <div><label class="form-label">Persona de Contacto</label><input type="text" id="bill-contact" required placeholder="Nombre responsable"></div>
                        </div>
                    </div>
                    <div class="pt-6"><button type="submit" class="w-full bg-slate-900 text-white font-black py-6 rounded-2xl shadow-xl hover:bg-blue-600 transition-all uppercase text-xs tracking-widest flex items-center justify-center gap-4"><i data-lucide="save"></i> FINALIZAR Y SOLICITAR ALTA</button></div>
                </form>
            </div>
            <div id="confidential-footer-onboarding" class="confidential-card"></div>
        </div>

        <!-- PESTAÑA 4: LOGÍSTICA Y GESTIÓN -->
        <div id="logistic" class="tab-content space-y-8 animate-in">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Logística Phakic -->
                <div class="bg-white p-6 md:p-10 rounded-[40px] border border-slate-100 shadow-xl">
                    <h4 class="font-black text-2xl text-slate-900 uppercase mb-8 flex items-center gap-4 border-b pb-4">
                        <i data-lucide="truck" class="text-blue-600"></i> Logística Eyecryl Phakic
                    </h4>
                    <div class="space-y-6">
                        <div class="flex justify-between items-center border-b border-slate-50 pb-4">
                            <div>
                                <p class="font-black text-sm text-slate-900">Esféricas Miópicas</p>
                                <p class="text-[10px] text-slate-400 italic">Pedidos antes de las 13:00h.</p>
                            </div>
                            <span class="text-blue-600 font-black text-xl">24h</span>
                        </div>
                        <div class="flex justify-between items-center border-b border-slate-50 pb-4">
                            <div>
                                <p class="font-black text-sm text-slate-900">Lentes Tóricas</p>
                                <p class="text-[10px] text-slate-400 italic">El 80% de los pedidos llegan en 6 días.</p>
                            </div>
                            <span class="text-slate-800 font-black text-xl">6-21 Días</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <div>
                                <p class="font-black text-sm text-slate-900">Lentes Custom</p>
                                <p class="text-[10px] text-slate-400 italic">Fabricaciones especiales fuera de rango.</p>
                            </div>
                            <span class="text-slate-800 font-black text-xl">33-50 Días</span>
                        </div>
                    </div>
                </div>

                <!-- Devoluciones -->
                <div class="bg-slate-900 p-6 md:p-10 rounded-[40px] text-white shadow-2xl">
                    <h4 class="font-black text-2xl uppercase mb-8 flex items-center gap-4 border-b border-white/10 pb-4 text-blue-400">
                        <i data-lucide="refresh-cw"></i> Política de Devoluciones
                    </h4>
                    <ul class="space-y-5 text-sm font-bold text-slate-300">
                        <li class="flex gap-4"><i data-lucide="calendar" class="text-blue-500 shrink-0 w-5 h-5"></i> <span>Periodo de devolución de <b>6 meses</b> desde fecha de factura.</span></li>
                        <li class="flex gap-4"><i data-lucide="x-circle" class="text-amber-500 shrink-0 w-5 h-5"></i> <span>Lentes Custom / Fabricación especial <b>no admiten devolución</b>.</span></li>
                    </ul>
                </div>

                <!-- Contabilidad Rappel -->
                <div class="bg-white p-6 md:p-10 rounded-[40px] border border-slate-100 shadow-xl">
                    <h4 class="font-black text-2xl text-slate-900 uppercase mb-8 flex items-center gap-4 border-b pb-4">
                        <i data-lucide="calculator" class="text-emerald-600"></i> Contabilidad de Rappel
                    </h4>
                    <div class="space-y-4 text-sm font-bold text-slate-500">
                        <p class="flex items-center gap-3"><i data-lucide="arrow-right" class="w-4 h-4 text-emerald-500"></i> Calculado sobre facturación neta anual acumulada.</p>
                        <p class="flex items-center gap-3"><i data-lucide="arrow-right" class="w-4 h-4 text-emerald-500"></i> Excluye lentes entregadas FOC (Free of Charge).</p>
                        <p class="flex items-center gap-3 font-black text-slate-900 mt-6 bg-emerald-50 p-5 rounded-2xl">Liquidación mediante abono a año vencido.</p>
                    </div>
                </div>

                <!-- Contacto Facturación -->
                <div class="bg-white p-6 md:p-10 rounded-[40px] border-2 border-blue-600 shadow-xl flex flex-col justify-center items-center text-center">
                    <div class="w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mb-6">
                        <i data-lucide="user" class="w-10 h-10 text-blue-600"></i>
                    </div>
                    <p class="text-[10px] font-black text-blue-600 uppercase tracking-widest mb-2">Facturación y Cuentas</p>
                    <h4 class="text-2xl font-black text-slate-900 mb-2">Ana Montasell</h4>
                    <a href="mailto:ana.montasell@biotechhealthcare.com" class="text-sm font-bold text-slate-400 underline mb-8">ana.montasell@biotechhealthcare.com</a>
                    <div class="w-full grid grid-cols-1 gap-2">
                        <div class="p-3 bg-slate-50 rounded-xl border border-slate-100 text-[11px] font-black text-slate-700">Resolución de Discrepancias</div>
                        <div class="p-3 bg-slate-50 rounded-xl border border-slate-100 text-[11px] font-black text-slate-700">Gestión de Abonos Rappel</div>
                    </div>
                </div>
            </div>

            <!-- Especialistas Biotech -->
            <div class="bg-white p-6 md:p-10 rounded-[40px] border border-slate-100 shadow-xl mt-8">
                <div class="flex items-center gap-4 mb-8"><i data-lucide="users" class="w-7 h-7 text-blue-600"></i><h3 class="text-xl md:text-2xl font-black text-slate-900 uppercase tracking-tight">Especialistas Biotech de Zona</h3></div>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4" id="contact-list-container"></div>
            </div>

            <div id="confidential-footer-logistic" class="confidential-card"></div>
        </div>
    </div>

    <script>
        const rappelScale = [
            { limit: 300000, rate: 0.015 }, { limit: 600000, rate: 0.020 },
            { limit: 900000, rate: 0.025 }, { limit: 1200000, rate: 0.030 },
            { limit: 1500000, rate: 0.035 }, { limit: 1800000, rate: 0.040 },
            { limit: 2100000, rate: 0.045 }, { limit: 2500000, rate: 0.050 }
        ];

        const avgPrices = { pseudo: 115, phakic: 750, visco: 11 };
        const phakicSpecs = "Tallas stock: 12.0 / 12.5 / 13.5mm. Requisitos: ACD mín. endotelio 2.8mm (incl. hipermetropía). Puerto central en toda la gama. Refracciones en plano intraocular.";

        const products = [
            // PHAKIC
            { cat: 'PHAKIC', name: 'Eyecryl Phakic baja potencia (esf/tor)', price: 550.00, desc: phakicSpecs },
            { cat: 'PHAKIC', name: 'Eyecryl Phakic alta potencia (sph)', price: 770.00, desc: phakicSpecs },
            { cat: 'PHAKIC', name: 'Eyecryl Phakic alta potencia (tor)', price: 990.00, desc: phakicSpecs },
            { cat: 'PHAKIC', name: 'Eyecryl Phakic low cyl (+0.50D y +1.00D)', price: 770.00, upgrade: true, desc: phakicSpecs },
            { cat: 'PHAKIC', name: 'Eyecryl Phakic Custom', price: 1450.00, special: true, desc: 'Tallas especiales o potencias fuera de rango estándar. <b>Estas lentes no admiten devolución.</b>' },
            
            // TRIFOCAL
            { cat: 'TRIFOCAL', name: 'Optiflex Trio 3FLA6', price: 300.00, desc: 'Trifocal hidrofóbica de 3 piezas.' },
            { cat: 'TRIFOCAL', name: 'Optiflex Trio TORICA', price: 400.00, desc: 'Corrección trifocal y astigmática.' },
            { cat: 'TRIFOCAL', name: 'Optiflex Trio Plus', price: 375.00, new: true, desc: 'Gama Glisten-Free de última generación.' },
            { cat: 'EDOF', name: 'Optiflex Xtense Comfort Plus', price: 375.00, new: true, desc: 'Lente visión continua EDOF.' },
            
            // MONOFOCALES
            { cat: 'EDOF', name: 'Eyecryl SERT (Edof/Monofocal avanzada)', price: 115.00, highlight: true, desc: 'Asférica precargada automatizada de rango extendido.' },
            { cat: 'EDOF', name: 'Eyecryl SERT Toric cyl 1', price: 210.00, highlight: true, desc: 'Tórica precargada cyl 1.' },
            { cat: 'EDOF', name: 'Eyecryl SERT Toric otros cyls', price: 230.00, highlight: true, desc: 'Tórica precargada para altos astigmatismos.' },
            { cat: 'MULTIFOCAL', name: 'Eyecryl Actv', price: 210.00, desc: 'Diseño difractivo HD.' },
            { cat: 'MONOFOCAL', name: 'Eyecryl Plus', price: 45.00, desc: 'Hidrofóbica una pieza manual.' },
            { cat: 'MONOFOCAL', name: 'Eyecryl 600', price: 35.00, desc: 'Hidrofílica clásica.' },
            { cat: 'MONOFOCAL', name: 'Eyecryl Comfort NY', price: 55.00, desc: 'Precargada con filtro amarillo.' },
            { cat: 'MONOFOCAL', name: 'Eyecryl Toric', price: 200.00, desc: 'Tórica carga manual.' },
            
            // OVDs
            { cat: 'OVDs', name: 'Eyevisc 2% 2ml', price: 7.70, desc: 'HPMC dispersivo.' },
            { cat: 'OVDs', name: 'Bio Hyalur 1ml', price: 9.90, desc: 'Cohesivo estándar 1%.' },
            { cat: 'OVDs', name: 'Bio Hyalur Plus 1ml', price: 10.80, desc: 'Cohesivo Plus optimizado.' },
            { cat: 'OVDs', name: 'Bio Hyalur HV 1ml', price: 12.00, desc: 'Alta viscosidad.' },
            { cat: 'OVDs', name: 'Bio Hyalur SV 1ml', price: 12.50, desc: 'Súper viscosidad.' },
            { cat: 'OVDs', name: 'Bio Hyalur Duo 1ml', price: 20.00, desc: 'Pack combinado.' },
            { cat: 'OVDs', name: 'Bio Hyalur CS 1ml', price: 23.00, desc: 'Fórmula con Condroitín Sulfato.' },
            { cat: 'OVDs', name: 'Bio Hyalur LVD 1ml', price: 24.50, desc: 'Dispersivo baja viscosidad.' },
            
            // VR Y OTROS
            { cat: 'OTROS', name: 'Bio Blue 1ml PFS', price: 9.50, desc: 'Azul de Trypan.' },
            { cat: 'OTROS', name: 'PMMA CTR Clear / Blue', price: 20.00, desc: 'Anillo de tensión capsular.' },
            { cat: 'OTROS', name: 'Iris Retractors', price: 40.00, desc: 'Set retractores iris.' },
            { cat: 'VR', name: 'BioBlue 90 Plus', price: 27.00, desc: 'Tinción selectiva ILM.' },
            { cat: 'VR', name: 'Bio Blue DUO', price: 40.00, desc: 'Doble tinción selectiva.' },
            { cat: 'VR', name: 'BioSil / Silicon Oil', price: 45.00, desc: 'Aceite de silicona.' },
            { cat: 'VR', name: 'Bio Decaline / Octane', price: 45.00, desc: 'Perfluorocarbonos.' },
            { cat: 'OTROS', name: 'Bioring', price: 245.00, desc: 'Indentación escleral (par).' }
        ];

        const contacts = [
            { zone: 'Zona Sur', name: 'Juan Pérez Lanzac', email: 'juanperez.lanzac@biotechhealthcare.com', tel: '+34 657 084 190', wa: '34657084190' },
            { zone: 'Centro / Norte', name: 'Ly García', email: 'ly.garcia@biotechhealthcare.com', tel: '+34 652 89 81 88', wa: '34652898188' },
            { zone: 'CAT / BAL', name: 'Vanessa García', email: 'vanessa.garcia@biotechhealthcare.com', tel: '+34 648 65 10 14', wa: '34648651014' },
            { zone: 'CAT / BAL', name: 'Marta Bautista', email: 'marta.bautista@biotechhealthcare.com', tel: '+34 661 31 81 61', wa: '34661318161' }
        ];

        document.addEventListener('DOMContentLoaded', () => {
            if (window.lucide) lucide.createIcons();
            renderRappelTable();
            renderProducts();
            renderContacts();
            updateGroupSim(950000);
            updateQProgress();
            setupFooters();
        });

        function renderRappelTable() {
            const tbody = document.getElementById('rappel-table-body');
            tbody.innerHTML = rappelScale.map((s, idx) => `
                <tr class="hover:bg-slate-50 transition-colors text-[11px] font-bold text-slate-800">
                    <td class="py-4 tracking-tight">${idx === 0 ? 'Hasta ' : 'Desde '} ${s.limit.toLocaleString('es-ES')} €</td>
                    <td class="py-4 text-right font-black text-blue-600">${(s.rate * 100).toFixed(1).replace('.', ',')}%</td>
                </tr>
            `).join('');
        }

        function renderProducts() {
            const list = document.getElementById('product-list');
            list.innerHTML = products.map(p => `
                <tr class="hover:bg-slate-50 transition-colors ${p.highlight ? 'bg-blue-50/40' : ''}">
                    <td class="p-6 font-black text-slate-800 text-[13px] ${p.highlight ? 'border-l-4 border-blue-600' : ''}">
                        <div class="flex flex-wrap items-center gap-2 mb-1.5">
                            ${p.name} 
                            ${p.new ? '<span class="badge-new">NUEVO</span>' : ''}
                            ${p.upgrade ? '<span class="badge-upgrade">UPGRADE</span>' : ''}
                            ${p.special ? '<span class="badge-special">ESPECIAL</span>' : ''}
                        </div>
                        <span class="text-[9px] bg-slate-100 px-2.5 py-1 rounded-md text-slate-400 uppercase font-black tracking-wider">${p.cat}</span>
                    </td>
                    <td class="p-6 text-right font-black text-blue-700 text-lg tabular-nums">
                        ${p.price.toFixed(2).replace('.', ',')} €
                    </td>
                    <td class="p-6 text-slate-500 font-semibold text-[10.5px] max-w-xs leading-relaxed">
                        ${p.desc || ''}
                    </td>
                </tr>`).join('');
        }

        function renderContacts() {
            const container = document.getElementById('contact-list-container');
            container.innerHTML = contacts.map(c => `
                <div class="contact-card p-6 rounded-[24px] flex flex-col h-full border border-slate-100">
                    <span class="text-[9px] font-black text-blue-600 uppercase tracking-widest mb-1.5">${c.zone}</span>
                    <h4 class="text-base font-black text-slate-900 mb-1">${c.name}</h4>
                    <a href="mailto:${c.email}" class="text-[10px] text-slate-400 font-bold underline mb-6 truncate">${c.email}</a>
                    <a href="https://wa.me/${c.wa}" target="_blank" class="mt-auto bg-white border border-slate-100 rounded-2xl py-3.5 px-4 flex items-center justify-center gap-2 shadow-sm hover:border-green-400 active:scale-[0.98] transition-all">
                        <i data-lucide="message-circle" class="w-4 h-4 text-green-500"></i>
                        <span class="text-xs font-black text-slate-700">${c.tel}</span>
                    </a>
                </div>
            `).join('');
            if (window.lucide) lucide.createIcons();
        }

        function submitOnboarding() {
            const billName = document.getElementById('bill-name').value;
            const body = `ALTA NUEVO CLIENTE SANITAS 2026\n\nNombre: ${billName}\nNIF: ${document.getElementById('bill-nif').value}\nDir: ${document.getElementById('bill-address').value}`;
            const recipients = 'ana.montasell@biotechhealthcare.com,ly.garcia@biotechhealthcare.com';
            window.location.href = `mailto:${recipients}?subject=SOLICITUD ALTA CLIENTE: ${encodeURIComponent(billName)}&body=${encodeURIComponent(body)}`;
        }

        function updateGroupSim(val) {
            const sales = parseInt(val);
            document.getElementById('group-display').innerText = sales.toLocaleString('es-ES') + ' €';
            let rate = 0;
            for (let i = rappelScale.length - 1; i >= 0; i--) { if (sales >= rappelScale[i].limit) { rate = rappelScale[i].rate; break; } }
            document.getElementById('group-percent').innerText = (rate * 100).toFixed(1).replace('.', ',') + '%';
            document.getElementById('group-cash').innerText = (sales * rate).toLocaleString('es-ES') + ' €';
        }

        function updateQProgress() {
            const pQty = parseFloat(document.getElementById('q-pseudo-qty').value) || 0;
            const fQty = parseFloat(document.getElementById('q-phakic-qty').value) || 0;
            const vQty = parseFloat(document.getElementById('q-visco-qty').value) || 0;
            const totalEuro = (pQty * avgPrices.pseudo) + (fQty * avgPrices.phakic) + (vQty * avgPrices.visco);
            document.getElementById('total-euro-display').innerText = totalEuro.toLocaleString('es-ES') + ' €';
            let rate = 0;
            for (let i = rappelScale.length - 1; i >= 0; i--) { if (totalEuro >= rappelScale[i].limit) { rate = rappelScale[i].rate; break; } }
            document.getElementById('q-rappel-cash').innerText = Math.round(totalEuro * rate).toLocaleString('es-ES') + ' €';
        }

        function showTab(id) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            document.getElementById('btn-' + id).classList.add('active');
            if (window.lucide) lucide.createIcons();
            window.scrollTo({ top: 0, behavior: 'smooth' });
            
            if(id === 'overview') {
                setTimeout(() => {
                    const sim = document.getElementById('internal-simulator');
                    if(sim) sim.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }, 100);
            }
        }

        function setupFooters() {
            const html = `
                <div class="flex items-start gap-4">
                    <i data-lucide="lock" class="w-5 h-5 text-slate-400 mt-1"></i>
                    <div>
                        <p class="font-black text-slate-800 uppercase tracking-widest text-[9px] mb-2">CONFIDENCIALIDAD ESTRATÉGICA SANITAS</p>
                        <p class="text-slate-500 font-semibold text-[10px]">Propiedad exclusiva de Biotech Healthcare Iberia S.L. Acceso limitado a Sanitas.</p>
                    </div>
                </div>`;
            ['catalog', 'overview', 'onboarding', 'logistic'].forEach(id => {
                const footer = document.getElementById(`confidential-footer-${id}`);
                if (footer) footer.innerHTML = html;
            });
            if (window.lucide) lucide.createIcons();
        }

        function sendQReport() {
            const body = `REPORTE SANITAS 2026\nVolumen Negocio: ${document.getElementById('total-euro-display').innerText}\nAbono: ${document.getElementById('q-rappel-cash').innerText}`;
            window.location.href = `mailto:ana.montasell@biotechhealthcare.com?subject=Reporte Rappel Sanitas 2026&body=${encodeURIComponent(body)}`;
        }
    </script>
</body>
</html>
